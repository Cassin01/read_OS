# 02
# プロセス
１つのプロセスとは１つの実行プログラムに対応する

## proc構造体とuser構造体
各プロセスはproc構造体とuser構造体により管理される

### proc構造体
常にカーネルから必要とされる情報を扱う

### user構造体
プロセスがオープンしたファイルやカレンとディレクトリ情報を扱う

## テキストセグメントとデータセグメント

各プロセスにはテキストセグメントデータセグメントの二つの物理メモリ領域が割り当てられる

### テキストセグメント(読み取り専用)

* プロセス間で共有される

* プログラムの機械語が格納される

* 中身は``text[]``で、サイズは``user.u_tsize``で管理

### データセグメント

* プログラムが使用する変数などのデータが格納される

* プロセス間で共有されない

* 物理アドレスは``proc.p_addr``、``サイズはproc.p_size``で管理

* 下位アドレスから順にPPDA、データ領域、スタック領域の３つから構成される

#### PPDA (Per Process Data Area)

* user構造体とカーネルスタック領域からなる

#### データ領域

* グローバル変数やbssなどの静的な変数が置かれる領域と、プロセスが動的にメモリ領域を管理するヒープ領域からなる

* サイズは``user.u_dsize``で管理

#### スタック領域

* 関数の引数やローカルデータなどを格納する領域
必要になった時に自動的に領域が拡張される
* サイズは``user.u_sssize``で管理